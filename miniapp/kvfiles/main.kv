

#: import os os
#: import Window kivy.core.window.Window
#: import ObjectProperty kivy.properties.ObjectProperty
#: import ScrollEffect kivy.effects.scroll.ScrollEffect
#:import get_color_from_hex kivy.utils.get_color_from_hex

#: set icon_size 20


<PageTurnerButton@Button>:
    background_normal: ''
    background_color: (0,0,0,0)
    size: (icon_size, 50)
    text: ''
    icon: ""

    canvas:
        Color: 
            rgba: (0,1,0,1) if not self.disabled else (220/255,220/255,220/255)
        Rectangle:
            size: self.size
            source: self.icon
            pos: self.pos


<Translation_widget@ScrollView>:
    text: "start"
    do_scroll_x: False
    do_scroll_y: True
    always_overscroll: False
    size_hint_y: None
    height: min(max(0.1 * Window.height, translation_result.height), 0.25 * Window.height)
    scroll_y: 1

    # both important in different cases: 1 works when text have same length
    # second: size changes
    on_text:
        self.scroll_y = 1
    on_height:
        self.scroll_y = 1 

    Label:
        text: self.parent.text
        color: (0,0,0,1)
        size_hint_y: None
        text_size: self.parent.width, None
        size: self.texture_size
        padding: 20, 0
        id: translation_result




<PageScreen>:
    id: reader
    name: 'reader'

    ScreenManager:
        size: self.parent.size
        id: page_screen

        Screen:
            name: 'debug'

            Button:
                text: 'read'
                on_press:
                    page_screen.current = 'book'        

        Screen:
            size: page_screen.size
            name: 'book'

            BoxLayout:
                orientation: 'vertical'
                size: self.parent.size

                MyAppBar:
                    id: pagePresenterAppBar
                    title: 'reader'
                    right_action_items: [['dots-vertical', lambda x: self.open_menu(x)]]
                    page_turner: page_presenter

                Label:
                    id: page_presenter
                    text: 'content'
                    color: (0,0,0,1)
        
